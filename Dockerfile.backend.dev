# Use the official Playwright image with the correct version
FROM mcr.microsoft.com/playwright:v1.54.0-noble

# Set the working directory
WORKDIR /app

# Install Python and pip
RUN apt-get update && apt-get install -y python3 python3-pip && rm -rf /var/lib/apt/lists/*

# Install Python dependencies
COPY pyproject.toml .
RUN pip3 install --no-cache-dir --break-system-packages .

# Copy the backend code
COPY . .

# Expose the FastAPI server port
EXPOSE 8000

# Start the dev server
CMD ["python3", "server.py"]
